/**
 * Material 3 Theme Configuration
 *
 * This file defines the Angular Material 3 theme with typography and color
 * configuration supporting both light/dark color schemes with normal and colorblind palettes.
 *
 * Theme combinations:
 * 1. Light + Normal (default)
 * 2. Light + Colorblind
 * 3. Dark + Normal
 * 4. Dark + Colorblind
 *
 * Note: M3 uses built-in palettes since custom palette generation requires
 * specific M3 tonal values (0, 10, 20, 25, 30, 35, 40, 50, 60, 70, 80, 90, 95, 98, 99, 100).
 * Our custom M2 palettes are preserved in custom-palette.scss for future M3 palette generation.
 */

@use '@angular/material' as mat;
@use 'sass:map';

// Include Material core styles (only once in the app)
@include mat.core;

// =============================================================================
// THEME DEFINITIONS
// =============================================================================

// -----------------------------------------------------------------------------
// LIGHT THEME WITH NORMAL PALETTE
// Using mat.$blue-palette (closest to our #1976d2 primary)
// -----------------------------------------------------------------------------
$light-normal-theme: mat.define-theme(
  (
    color: (
      theme-type: light,
      primary: mat.$blue-palette,
      tertiary: mat.$cyan-palette,
    ),
    typography: (
      plain-family: 'Roboto Condensed',
      brand-family: 'Roboto Condensed',
      bold-weight: 700,
      medium-weight: 500,
      regular-weight: 400,
    ),
    density: (
      scale: -2,
    ),
  )
);

// -----------------------------------------------------------------------------
// LIGHT THEME WITH COLORBLIND PALETTE
// Using mat.$azure-palette for colorblind-friendly blue
// and mat.$orange-palette for distinct accent
// -----------------------------------------------------------------------------
$light-colorblind-theme: mat.define-theme(
  (
    color: (
      theme-type: light,
      primary: mat.$azure-palette,
      tertiary: mat.$orange-palette,
    ),
    typography: (
      plain-family: 'Roboto Condensed',
      brand-family: 'Roboto Condensed',
      bold-weight: 700,
      medium-weight: 500,
      regular-weight: 400,
    ),
    density: (
      scale: -2,
    ),
  )
);

// -----------------------------------------------------------------------------
// DARK THEME WITH NORMAL PALETTE
// -----------------------------------------------------------------------------
$dark-normal-theme: mat.define-theme(
  (
    color: (
      theme-type: dark,
      primary: mat.$blue-palette,
      tertiary: mat.$cyan-palette,
    ),
    typography: (
      plain-family: 'Roboto Condensed',
      brand-family: 'Roboto Condensed',
      bold-weight: 700,
      medium-weight: 500,
      regular-weight: 400,
    ),
    density: (
      scale: -2,
    ),
  )
);

// -----------------------------------------------------------------------------
// DARK THEME WITH COLORBLIND PALETTE
// -----------------------------------------------------------------------------
$dark-colorblind-theme: mat.define-theme(
  (
    color: (
      theme-type: dark,
      primary: mat.$azure-palette,
      tertiary: mat.$orange-palette,
    ),
    typography: (
      plain-family: 'Roboto Condensed',
      brand-family: 'Roboto Condensed',
      bold-weight: 700,
      medium-weight: 500,
      regular-weight: 400,
    ),
    density: (
      scale: -2,
    ),
  )
);

// =============================================================================
// APPLY THEMES
// =============================================================================

// Default theme: Light + Normal (no class needed)
// Apply all Material 3 component styles (color, typography, density)
html {
  @include mat.all-component-themes($light-normal-theme);
}

// Light + Colorblind (colorblind-palette class)
.colorblind-palette {
  @include mat.all-component-colors($light-colorblind-theme);
}

// Dark + Normal (dark-theme class)
.dark-theme {
  @include mat.all-component-colors($dark-normal-theme);

  // Dark theme custom CSS variables for application-specific styling
  --theme-background: #303030;
  --theme-surface: #424242;
  --theme-card: #424242;
  --theme-text-primary: #fff;
  --theme-text-secondary: rgb(255 255 255 / 70%);
  --theme-text-disabled: rgb(255 255 255 / 50%);
  --theme-divider: rgb(255 255 255 / 12%);
  --theme-hover: rgb(255 255 255 / 4%);
  --theme-selected: rgb(255 255 255 / 8%);

  // Logo colors (dark theme)
  // Elephant uses lighter gray for contrast on dark backgrounds
  --logo-elephant-color: #b0b0b0;

  // Text uses white for maximum contrast on dark backgrounds
  --logo-text-color: #fff;
}

// Dark + Colorblind (both classes)
.dark-theme.colorblind-palette {
  @include mat.all-component-colors($dark-colorblind-theme);
}

// =============================================================================
// CUSTOM THEME VARIABLES
// =============================================================================

// Define CSS variables that adapt to theme for application-specific styling
:root {
  // Default light theme colors
  --theme-background: #fff;
  --theme-surface: #f5f5f5;
  --theme-card: #fff;
  --theme-text-primary: #212121;
  --theme-text-secondary: #757575;
  --theme-text-disabled: rgb(0 0 0 / 38%);
  --theme-divider: rgb(0 0 0 / 12%);
  --theme-hover: rgb(0 0 0 / 4%);
  --theme-selected: rgb(0 0 0 / 8%);
}
